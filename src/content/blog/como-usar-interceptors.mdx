---
heroImage: /images/posts/como-usar-interceptors.png
category: Angular
description: >-
  Nesse artigo voc√™ vai aprender o que s√£o Interceptors no Angular e como utilizar esse recurso para interceptar e manipular as requisi√ß√µes HTTP.
pubDate: '2025-01-13'
draft: false
tags:
  - angular
title: 'Como usar Interceptors no Angular'
authorId: 'henrique-custodia'
---

import EmbedYtVideo from '@embed-yt-video'
import Ads from '@ads'

Interceptors no Angular s√£o recursos muito poderosos e podem ser usados para interceptar e
manipular as requisi√ß√µes HTTP que s√£o feitas pela aplica√ß√£o.

Nesse artigo voc√™ vai aprender como utilizar esse recurso fant√°stico!

## Como criar um interceptor

No exemplo abaixo vamos criar um interceptor que intercepta todas as requisi√ß√µes HTTP e adiciona um **Header** personalizado chamado `Authorization`.

> Voc√™ pode utilizar o comando [`ng g interceptor <name>`](https://angular.dev/cli/generate/interceptor) para criar uma estrutura b√°sica do interceptor.

```ts
export const addAuthTokenInterceptor: HttpInterceptorFn = (req, next) => {
	req = req.clone({
		headers: req.headers.append('Authorization', 'my-token')
	})

	return next(req)
}
```

> O c√≥digo acima pode ficar em um arquivo TypeScript chamado `add-auth-token.interceptor.ts`.

Note que para alterar a vari√°vel `req` (que √© a requisi√ß√£o de fato) precisamos usar o m√©todo `clone` para criar uma nova inst√¢ncia.
Essa abordagem √© necess√°rio pois cada objeto de requisi√ß√£o HTTP √© imut√°vel.

## Como usar um interceptor

Para usar o interceptor basta adicion√°-lo como par√¢metro na fun√ß√£o [`withInterceptors`](https://angular.dev/api/common/http/withInterceptors#) da fun√ß√£o [`provideHttpClient`](https://angular.dev/api/common/http/provideHttpClient#):

```ts
export const appConfig: ApplicationConfig = {
	providers: [provideHttpClient(withInterceptors([addAuthTokenInterceptor]))]
}
```

> O c√≥digo acima √© referente ao conte√∫do do arquivo `app.config.ts`.

Pronto! Agora √© s√≥ fazer requisi√ß√µes HTTP utilizando o servi√ßo [`HttpClient`](https://angular.dev/api/common/http/HttpClient) e verificar se o interceptor fez as altera√ß√µes esperadas.

## Conclus√£o

Simples, n√£o?

Interceptors √© uma das funcionalidades mais poderosas do Angular devido a sua
simplicidade em padronizar a manipula√ß√£o de requisi√ß√µes HTTP em massa.

No pr√≥ximo artigo voc√™ aprender√° [como testar Interceptors da forma mais confi√°vel e eficiente poss√≠vel](https://blog.codedimension.com.br/post/como-testar-interceptors/).

Obrigado por ler at√© aqui e at√© mais! üòé
