---
heroImage: /images/posts/como-criar-initializer.png
category: Angular
description: >-
  Nesse artigo voc√™ vai aprender o que s√£o initializers no Angular e o e como utilizar esse recurso para criar rotinas dentro da sua aplica√ß√£o.
pubDate: '2025-01-20'
draft: false
tags:
  - angular
  - testes
title: 'Como criar Initializers no Angular'
authorId: 'henrique-custodia'
---

import EmbedYtVideo from '@embed-yt-video'
import Ads from '@ads'

[Initializers](https://angular.dev/api/core/provideAppInitializer) s√£o recursos muito poderosos que permitem voc√™ criar rotinas em uma aplica√ß√£o que ser√£o rodadas assim que o Angular inicializar.

Nesse artigo voc√™ vai aprender como utilizar esse recurso fant√°stico!

> <EmbedYtVideo src='https://www.youtube.com/embed/Rb9zgZQpanA?si=jKs3IsTv8hZM3z9r' />

## O que √© um Initializer

[Initializers](https://angular.dev/api/core/provideAppInitializer) s√£o fun√ß√µes que ser√£o executadas assim que o Angular inicializar.

Esse recurso pode ser muito √∫til quando voc√™ precisar criar alguma rotina que deve ser rodada antes de qualquer outra opera√ß√£o da aplica√ß√£o.

Alguns cen√°rios de uso seriam:

- Fazer uma requisi√ß√£o HTTP para obter as configura√ß√µes atualizadas da aplica√ß√£o
- Fazer download dos textos do idioma selecionado pelo usu√°rio (cen√°rio de uma aplica√ß√£o multilingual)
- Rodar alguma verifica√ß√£o e limpeza em `Local Storage` ou `Session Storage` para evitar problemas com dados antigos

Um ponto importante sobre os [Initializers](https://angular.dev/api/core/provideAppInitializer) √© a aplica√ß√£o s√≥ ser√° de fato inicializada (renderizar o componente raiz) quando todos os [Initializers](https://angular.dev/api/core/provideAppInitializer) forem executados.

[Initializers](https://angular.dev/api/core/provideAppInitializer) podem retornar uma [`Promise`](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Promise), [`Observable`](https://rxjs.dev/guide/observable) ou nada (void) para que dessa forma o Angular possa aguardar a conclus√£o da mesma.

## Como criar um Inicializer

No exemplo abaixo vamos criar um initializer que far√° uma requisi√ß√£o HTTP assim que o Angular inicializar para recuperar as configura√ß√µes da aplica√ß√£o.

```ts
// essa fun√ß√£o ser√° registrada em app.config.ts
export function provideConfigInitializer() {
	// essa fun√ß√£o registra um initializer de forma transparente
	return provideAppInitializer(() => {
		// faz a inje√ß√£o do service que permite recuperar as configura√ß√µes do servidor
		const configService = inject(ConfigService)

		// faz a requisi√ß√£o HTTP e mant√©m as configura√ß√µes em mem√≥ria
		return configService.getData()
	})
}
```

> O c√≥digo acima utiliza como refer√™ncia o Angular 19

Note que para criar o initializer precisamos utilizar a fun√ß√£o [`provideAppInitializer`](https://angular.dev/api/core/provideAppInitializer#) que recebe uma fun√ß√£o que retorna uma `Promise` ou `Observable`.

Dessa forma fica bem simples e elegante o uso desse recurso.

## Como utilizar um Inicializer

Para utilizar o initializer criado acima, basta registrar a fun√ß√£o no arquivo `app.config.ts`.

```ts
export const appConfig = {
	providers: [provideConfigInitializer()]
}
```

<Ads />

## Como testar um Inicializer

Testar um initializer √© bem simples. Vamos utilizar como exemplo o initializer criado acima como base.

```ts
describe('provideConfigInitializer', () => {
	it('deve recurperar as configura√ß√µes', async () => {
		TestBed.configureTestingModule({
			providers: [
				// registra o initializer
				provideConfigInitializer(),

				// faz o mock do service ConfigService
				{
					provide: ConfigService,
					useValue: {
						getData: jest.fn()
					}
				}
			]
		})

		// faz a inje√ß√£o dos services
		const configService = TestBed.inject(ConfigService)

		// verifica se a fun√ß√£o getData foi chamada
		expect(configService.getData).toHaveBeenCalled()
	})
})
```

Essa abordagem permite com que voc√™ teste o initializer da mesma forma que uma aplica√ß√£o.

> O teste acima utiliza como refer√™ncia o Angular 19

## Conclus√£o

Initializers s√£o uma ferramenta muito poderosa que permitem criar rotinas em uma aplica√ß√£o que s√£o executadas assim que o Angular inicializar.

Esse recurso permite criar rotinas que podem resolver muitas coisas, como carregar configura√ß√µes, limpar dados antigos, etc.

Obrigado por ler at√© aqui e at√© mais! üòé
